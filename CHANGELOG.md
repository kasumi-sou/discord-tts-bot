# 更新履歴

# 0.2.0

## 機能追加

### ボイス関連

- `/set_voice` で各サーバー,各ユーザーごとに声を設定、保存可能に
- ボイスチャンネルにメンバーが入退出した際、読み上げで知らせます。
- ボイスチャンネルから誰もいなくなり、5分経過すると自動で退出します。
  - ただし、5分経過後にボイスチャンネルに他のメンバー参加している場合、参加し続けます。
- ローマ字で送信されたメッセージを日本語に変換して読み上げ
- スポイラーメッセージが送信された場合、`スポイラー`と読み上げ
- 添付ファイルつきのメッセージが送信された場合、読み上げの最後に`添付メッセージ`と追加
- `'`が文の最初に含まれていた場合、読み上げ対象から除外

### その他

- `/help` でヘルプ画面を、`/command` で利用可能なコマンド一覧を表示
  - アップデート後数日間は`/help`を実行した際、新着機能通知についても表示します。
- `/avatar` で指定したメンバーのアバター画像を返信
- `健康に良くない`と送信された場合、[この画像](https://i.imgur.com/fCAbCPu.png)を返信
- `そうはならんやろ`と送信された場合、[この画像](https://gyazo.com/a90d3aa5edf71c5e132f72d8a8254ce8/max_size/1000)を返信

## 機能変更・修正

- デフォルトの読み上げボイスを変更
- 一部の文字,絵文字の読み方を修正
- 生成音声をステレオからモノラルに変更
- 旧来の方式では生成した音声を一回保存し、再生後に削除していましたが、ファイルを保存せずにメモリ上に一時的にプールさせて再生させるようにしました。
  - これにより、応答速度が少し改善しました。
- メッセージのURL判定精度を改善
- ギルドやメンバーのデータの保存方法を変更
  - `data.js`だけでなく、`./.data/`内の`json`ファイルにも保存するようにしました。
    - これにより、botを再起動した際にも設定が揮発しなくなりました。
- 説明文を修正

## バグ修正

- 正常に読み上げられないものを修正

## その他の追加・変更

- 更新通知をbotが参加している全サーバーに一斉送信(`./utils/noticeUpdate.js`)
  - ただし、この機能を使用するにはシステムメッセージの送信チャンネルを設定している必要があります。

## 依存関係更新

無し
